{% extends "base.html" %}
{% block title %}
   Home Page
{% endblock %}
{% block content %}
<style type="text/css">

fieldset {
	background-color: #fdfed4;
	color: black;
	font-family: purisa;
}
legend{
    font-weight:bold;
}

</style>
<script>
function changesubmit(o,path)
{
    o.setAttribute('type','submit')
    f = document.getElementById('MainForm')
    f.setAttribute('action',path);
    o.click();
}
function fillOptions(o)
{
    //alert(o)
    if (o.children.length >= 1) 
       { 
         while(o.firstChild)
             o.removeChild(o.firstChild)
       }
    
    c = o.previousElementSibling.value
    d = new Date();
    y = d.getFullYear(); //current year
   
    if (c == 'MSc. (CA)' || c == 'MBA-IT')
       {
           //for sem 1 and 2
           options = document.createElement('option')
           options.text = y-1 + '-' + ((y+1)%100);
           o.add(options,null)
           //for sem 3 and 4
           options = document.createElement('option')
           options.text = y + '-' + ((y+2)%100);
           o.add(options,null)
       }
    else
    {
        //for sem 5 and 6
        options = document.createElement('option')
        options.text = (y-2) + '-' + ((y+1)%100);
        o.add(options,null)
        //for sem 3 and 4
        options = document.createElement('option')
        options.text = (y-1) + '-' + ((y+2)%100);
        o.add(options,null)
        //for sem 1 and 2
        options = document.createElement('option')
        options.text = y + '-' + ((y+3)%100);
        o.add(options,null)
    }

}
f
</script>
<div id="menubar">
{% if not About_us_filled %}
<input type="button" value="Feedback About this Software" onClick="javascript:location.href='{{ROOT}}/give_feedback/16/show'"><br>
{% endif %}
<input type='button' onClick="javascript:location.href='{{ROOT}}/ldap_login/logout'" value='Logout!' alt='Enough of form filling!'></span> 
</div>
<h2> Hi {{fullname}}! </h2>


<!-- Admin thingies -->

{% if is_coordinator %}
<fieldset> 
<legend> Student's Feedback Form Printout </legend>
<form id = 'MainForm' method = 'post' action = '{{ROOT}}/manage_feedback/studentsummary'>
{% csrf_token %}
<b>Select Programme:</b>
<select id = 'SamarXandY' name = 'programme'>
{% for b in batch %}
<option>{{b}}</option>
{%endfor%}
</select>
<b>Select Batch:</b>
<select name = 'batch' onfocus = 'fillOptions(this)'></select><br/>
<input type='submit' id='submitbtn' value = "Get Students' Feedback Forms" onclick = 'changesubmit(this,"{{ROOT}}/manage_feedback/studentsummary")'> <br/>
<input type='button' id='notfilled' value = "Get Students' who hav not filled" onclick = 'changesubmit(this,"{{ROOT}}/manage_feedback/notfilled/")'> <br/>
<input type = 'button' onclick ='javascript:location.href = "{{ROOT}}/manage_feedback/createforms"' value = 'create mass feedback forms'>
<i>Please note this<b> feature is Beta </b> and currently under development. We are offering only <b> a preview of the real thing :)</b></li>
</form>
</fieldset> 
{% endif %}


                <!-- New feedback forms -->

<fieldset>
<legend> Feedback forms to be filled </legend>

<table cellpadding='16' align='center'>
    {% for form in unfilled_list %}
      {% if today < form.deadline_for_filling %}
        <tr bgcolor='#b3dlea'><td> <a href='{{ROOT}}/give_feedback/{{form.id}}/show'>{{ form.title }}</a>
            <img align='right' src='/../../change_agent_media/clock' height=40 width=40>
        
        </td>
        <td>{{ form.deadline_for_filling|timeuntil }} left </td></tr>
      {% else %}
        <tr><td>{{ form.title }}</td> <td><i> Deadline already exceeded!</i></td></tr>
      {% endif %}
    {% empty %}
        <i>You have no new feedback forms </i>
    {% endfor %}
</table>
{% comment %}
<p id='disclaimer' align='right'>Please note that all these forms are official feedback forms of SICSR.<br/>The questions, and options are all offical and the sofware hold no responsibilty for the data.</p>
{% endcomment %}
</fieldset>


                <!-- For Preview....-->


<fieldset>
<legend> Feedback you gave </legend>

<table cellpadding='16' align='center'>
    {% for form in filled_list %}
      {% if today < form.feedbackForm.deadline_for_filling  %}
         <tr> <td><a href='{{ROOT}}/give_feedback/{{form.id}}/preview.html'>{{form.feedbackForm.title}}</a></td>
      {% else %}
        <tr><td><a href = '{{ROOT}}/give_feedback/{{form.id}}/preview.html'>{{ form.feedbackForm.title }}</a></td>
      {% endif %} 
	  <td> {{form.feedbackForm.deadline_for_filling|timeuntil }} left</tr>
     {% empty%}
         <i> You have not filled any forms</i>
     {% endfor %}
</table>
</fieldset>

            <!-- Feedback About -->

{% if feedback_about_list %}
<fieldset>
<legend> Feedback Form Summary you can view</legend>
<ul align = 'center'>
{% for f in feedback_about_list %}
 <li><a href ="{{ROOT}}/manage_feedback/{{f.id}}/feedbackAbout"> {{ f }} </a> </li>
{% endfor %}
{% endif %}
</ul>
</fieldset>


{% endblock %}
</body>
</html>
